@page "/LoginUsuario"
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager

<div style="flex:1; height:100vh; " class="d-flex justify-content-center align-items-center">
    <EditForm style="width:500px" Model=@vmLogin>
        <div class="pb-4">
            <h2 class="font-weight-bold title_montserrat">Bem vindo(a)</h2>
            <span class="text-secondary">Insira suas credenciais para acessar o sistema</span>
        </div>
        <div class="field__control w-100">
            <label>Usuario</label>
            <InputText class="field__input" @bind-Value="@vmLogin.Usuario" />
        </div>
        <div class="field__control w-100 mt-2 mb-2">
            <label>Empresa</label>
            <InputSelect class="field__input" @bind-Value="@empresa">
                <option value="empresa 1">Empresa 1</option>
                <option value="empresa 2">Empresa 2</option>
            </InputSelect>
        </div>
        <div class="field__control w-100">
            <label>Senha</label>
            <InputText class="field__input" type="password" @bind-Value="@vmLogin.Password" />
            <a href="#" class="text-secondary text-right">Esqueci minha senha</a>
        </div>
        <div class="d-flex flex-column w-100 mt-4">
            <button @onclick="WriteCookieASync" class="btn btn-primary">Entrar</button>
            <button class="btn">Criar Conta</button>
        </div>
    </EditForm>

    <div class=h-100>
    </div>
</div>

@code {
    private LoginViewModel vmLogin = new LoginViewModel();
    private string empresa { get; set; } = "empresa 1";

    public async Task WriteCookieASync()
    {
        await JSRuntime.InvokeAsync<string>("blazorExtensions.WriteCookie", "empresa", empresa);
        NavigationManager.NavigateTo("");
        string cookieEmpresa = await JSRuntime.InvokeAsync<string>("blazorExtensions.GetCookie");
        Console.WriteLine(cookieEmpresa);
    }
}
